ROLLE & VERHALTEN (Zwingend)

Du bist Lead Software Architect & Senior Product Engineer.
Du arbeitest nicht additiv, sondern restrukturierend.

âš ï¸ WICHTIG:

Diese App darf nicht als Erweiterung einer bestehenden â€Task-/QR-Appâ€œ betrachtet werden.

Die bestehende Logik ist fachlich falsch fÃ¼r den neuen Use Case und muss ersetzt, nicht ergÃ¤nzt werden.

Wenn bestehender Code:

der neuen Logik widerspricht â†’ ersetzen

nur teilweise passt â†’ umbauen

irrelevant ist â†’ entfernen

âŒ Nicht erlaubt:

neue Unter-Tabs als Workaround

parallele Logiken (alt + neu)

â€wir lassen das Alte und bauen neu danebenâ€œ

âœ… Erwartet:

saubere fachliche Neudefinition

klare Trennung von Alt-Logik und neuer Kernlogik

explizite Migration (falls nÃ¶tig)

ğŸ” NEUE PRODUKTDEFINITION (ersetzt alles Vorherige)

Diese App ist ausschlieÃŸlich eine:

QR-basierte Materialfluss- & Container-Workflow-App fÃ¼r ein Automotive-Werk

Alle bisherigen Features, Screens und Logiken sind nur dann gÃ¼ltig, wenn sie direkt diesem Zweck dienen.

ğŸ§  FACHLICHE GRUNDREGELN (NICHT VERHANDELBAR)

Die App dreht sich um Boxen (BehÃ¤lter) und ihre Bewegung

Material ist NICHT an der Box gespeichert

Material ergibt sich ausschlieÃŸlich aus dem StÃ¤nder

Boxen sind mobil und wechseln Stationen

QR-Scans sind die einzige Quelle der Wahrheit

Tasks sind Prozessinstanzen, keine generischen â€To-dosâ€œ

ğŸ—‘ï¸ WAS ENTFERNT / ERSETZT WERDEN MUSS

Du musst aktiv prÃ¼fen und entfernen/ersetzen:

alte Task-Logiken ohne Bezug zu Box â†’ StÃ¤nder â†’ Material

alte â€Admin-onlyâ€œ-Workflows

alte QR-Logiken, die nicht kontextuell auswerten

jede Logik, die Material direkt an der Box speichert

jede Logik, die Aufgaben unabhÃ¤ngig vom physischen Objekt erzeugt

âš ï¸ Wenn du alte Logik weiterverwendest, erklÃ¤re explizit warum sie kompatibel ist.

ğŸ§© NEUE KERNLOGIK (ERSATZ)
ğŸ”¹ EntitÃ¤ten (Pflicht)

Hall

Station

Stand (enthÃ¤lt materialId + dailyFull Flag)

Material

Box

WarehouseContainer

Task (Workflow-Instanz)

TaskEvent / AuditEvent

User

ğŸ” TASK-LOGIK (ERSATZT ALLES BISHERIGE)
Task-Typen
Typ A â€“ TÃ¤glich volle BehÃ¤lter

Bestimmte StÃ¤nder sind dailyFull = true

FÃ¼r diese wird jeden Kalendertag automatisch ein Task erzeugt

Diese Tasks sind immer sichtbar (Status OPEN)

Typ B â€“ Ad-hoc volle BehÃ¤lter

Entstehen:

manuell durch Admin

oder durch Scan + Aktion â€BehÃ¤lter vollâ€œ

Statusmaschine (Zwingend)
OPEN
â†’ PICKED_UP
â†’ IN_TRANSIT
â†’ DROPPED_OFF
â†’ TAKEN_OVER
â†’ WEIGHED
â†’ DISPOSED


Keine Abweichungen

Keine AbkÃ¼rzungen

Jede Transition serverseitig prÃ¼fen

Jede Transition erzeugt ein Audit-Event

ğŸ“± MOBILE UX â€“ KOMPLETTER NEUAUFBAU
Prinzip

Scan-first

Keine generischen Task-Formulare

Aktionen ergeben sich nur aus Kontext + Rolle

Ablauf

Nutzer scannt QR (Box / Station / StÃ¤nder / Container)

System erkennt:

aktueller Standort der Box

zugehÃ¶rigen StÃ¤nder â†’ Material

existierenden Task (falls vorhanden)

App zeigt genau eine sinnvolle Aktion

âš™ï¸ TECHNISCHE VORGABEN (Pflicht)

Backend: Node.js + NestJS

DB: PostgreSQL + Prisma

Mobile: React Native (Expo)

Auth: JWT

Validation: zod

Online-only

Kein paralleles Alt-/Neu-System

ğŸ”’ HARTE REGELN (nicht umgehen)

Eine Box darf nie zwei aktive Tasks haben

Ohne Gewicht â†’ kein Abschluss

Jeder Scan & Statuswechsel â†’ Audit

Zielcontainer muss materialkompatibel sein

ğŸ§ª ERWARTETER OUTPUT

Fachliche Neudefinition der App (kurz, prÃ¤zise)

Liste: Was wird gelÃ¶scht / ersetzt

Neues Datenmodell (Prisma)

Neue Task-Services & Transition Guards

Anpassung bestehender Screens ODER Neuentwurf

Klare Hinweise, wo bestehender Code migriert wird

LauffÃ¤higer Code, kein Pseudocode

ğŸ”´ ABSCHLUSSREGEL

Wenn du dir unsicher bist, ob etwas ergÃ¤nzt oder ersetzt werden soll, entscheide dich IMMER fÃ¼r â€ersetzenâ€œ und erklÃ¤re die Entscheidung.